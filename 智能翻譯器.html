<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ™ºèƒ½ç¿»è­¯å™¨</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gradient-to-br from-blue-50 to-indigo-100 min-h-screen">
    <div class="container mx-auto px-4 py-8">
        <!-- æ¨™é¡Œ -->
        <div class="text-center mb-8">
            <h1 class="text-4xl font-bold text-gray-800 mb-2">ğŸŒ æ™ºèƒ½ç¿»è­¯å™¨</h1>
            <p class="text-gray-600">å¿«é€Ÿæº–ç¢ºçš„å¤šèªè¨€ç¿»è­¯å·¥å…·</p>
        </div>



        <!-- ç¿»è­¯å™¨ä¸»é«” -->
        <div class="max-w-4xl mx-auto bg-white rounded-2xl shadow-xl overflow-hidden">
            <!-- èªè¨€é¸æ“‡å€ -->
            <div class="bg-gray-50 p-6 border-b">
                <div class="flex flex-col md:flex-row items-center justify-between gap-4">
                    <div class="flex items-center gap-3">
                        <label class="text-sm font-medium text-gray-700">ä¾†æºèªè¨€:</label>
                        <select id="sourceLanguage" class="px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                            <option value="zh-TW">ç¹é«”ä¸­æ–‡</option>
                            <option value="zh-CN">ç°¡é«”ä¸­æ–‡</option>
                            <option value="en">English</option>
                            <option value="ja">æ—¥æœ¬èª</option>
                            <option value="ko">í•œêµ­ì–´</option>
                            <option value="es">EspaÃ±ol</option>
                            <option value="fr">FranÃ§ais</option>
                            <option value="de">Deutsch</option>
                            <option value="it">Italiano</option>
                            <option value="pt">PortuguÃªs</option>
                            <option value="ru">Ğ ÑƒÑÑĞºĞ¸Ğ¹</option>
                            <option value="ar">Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©</option>
                            <option value="hi">à¤¹à¤¿à¤¨à¥à¤¦à¥€</option>
                            <option value="th">à¹„à¸—à¸¢</option>
                            <option value="vi">Tiáº¿ng Viá»‡t</option>
                            <option value="id">Bahasa Indonesia</option>
                            <option value="ms">Bahasa Melayu</option>
                            <option value="tl">Filipino</option>
                            <option value="nl">Nederlands</option>
                            <option value="sv">Svenska</option>
                            <option value="no">Norsk</option>
                            <option value="da">Dansk</option>
                            <option value="fi">Suomi</option>
                            <option value="pl">Polski</option>
                            <option value="cs">ÄŒeÅ¡tina</option>
                            <option value="hu">Magyar</option>
                            <option value="ro">RomÃ¢nÄƒ</option>
                            <option value="bg">Ğ‘ÑŠĞ»Ğ³Ğ°Ñ€ÑĞºĞ¸</option>
                            <option value="hr">Hrvatski</option>
                            <option value="sk">SlovenÄina</option>
                            <option value="sl">SlovenÅ¡Äina</option>
                            <option value="et">Eesti</option>
                            <option value="lv">LatvieÅ¡u</option>
                            <option value="lt">LietuviÅ³</option>
                            <option value="uk">Ğ£ĞºÑ€Ğ°Ñ—Ğ½ÑÑŒĞºĞ°</option>
                            <option value="be">Ğ‘ĞµĞ»Ğ°Ñ€ÑƒÑĞºĞ°Ñ</option>
                            <option value="mk">ĞœĞ°ĞºĞµĞ´Ğ¾Ğ½ÑĞºĞ¸</option>
                            <option value="sq">Shqip</option>
                            <option value="sr">Ğ¡Ñ€Ğ¿ÑĞºĞ¸</option>
                            <option value="bs">Bosanski</option>
                            <option value="mt">Malti</option>
                            <option value="is">Ãslenska</option>
                            <option value="ga">Gaeilge</option>
                            <option value="cy">Cymraeg</option>
                            <option value="eu">Euskera</option>
                            <option value="ca">CatalÃ </option>
                            <option value="gl">Galego</option>
                            <option value="tr">TÃ¼rkÃ§e</option>
                            <option value="he">×¢×‘×¨×™×ª</option>
                            <option value="fa">ÙØ§Ø±Ø³ÛŒ</option>
                            <option value="ur">Ø§Ø±Ø¯Ùˆ</option>
                            <option value="bn">à¦¬à¦¾à¦‚à¦²à¦¾</option>
                            <option value="ta">à®¤à®®à®¿à®´à¯</option>
                            <option value="te">à°¤à±†à°²à±à°—à±</option>
                            <option value="ml">à´®à´²à´¯à´¾à´³à´‚</option>
                            <option value="kn">à²•à²¨à³à²¨à²¡</option>
                            <option value="gu">àª—à«àªœàª°àª¾àª¤à«€</option>
                            <option value="pa">à¨ªà©°à¨œà¨¾à¨¬à©€</option>
                            <option value="mr">à¤®à¤°à¤¾à¤ à¥€</option>
                            <option value="ne">à¤¨à¥‡à¤ªà¤¾à¤²à¥€</option>
                            <option value="si">à·ƒà·’à¶‚à·„à¶½</option>
                            <option value="my">á€™á€¼á€”á€ºá€™á€¬</option>
                            <option value="km">ááŸ’á˜áŸ‚áš</option>
                            <option value="lo">àº¥àº²àº§</option>
                            <option value="ka">áƒ¥áƒáƒ áƒ—áƒ£áƒšáƒ˜</option>
                            <option value="hy">Õ€Õ¡ÕµÕ¥Ö€Õ¥Õ¶</option>
                            <option value="az">AzÉ™rbaycan</option>
                            <option value="kk">ÒšĞ°Ğ·Ğ°Ò›</option>
                            <option value="ky">ĞšÑ‹Ñ€Ğ³Ñ‹Ğ·</option>
                            <option value="uz">O'zbek</option>
                            <option value="tg">Ğ¢Ğ¾Ò·Ğ¸ĞºÓ£</option>
                            <option value="mn">ĞœĞ¾Ğ½Ğ³Ğ¾Ğ»</option>
                            <option value="sw">Kiswahili</option>
                            <option value="am">áŠ áˆ›áˆ­áŠ›</option>
                            <option value="yo">YorÃ¹bÃ¡</option>
                            <option value="ig">Igbo</option>
                            <option value="ha">Hausa</option>
                            <option value="zu">isiZulu</option>
                            <option value="af">Afrikaans</option>
                        </select>
                    </div>
                    
                    <button id="swapLanguages" class="p-2 text-blue-600 hover:bg-blue-50 rounded-full transition-colors">
                        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4"></path>
                        </svg>
                    </button>
                    
                    <div class="flex items-center gap-3">
                        <label class="text-sm font-medium text-gray-700">ç›®æ¨™èªè¨€:</label>
                        <select id="targetLanguage" class="px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                            <option value="en">English</option>
                            <option value="zh-TW">ç¹é«”ä¸­æ–‡</option>
                            <option value="zh-CN">ç°¡é«”ä¸­æ–‡</option>
                            <option value="ja">æ—¥æœ¬èª</option>
                            <option value="ko">í•œêµ­ì–´</option>
                            <option value="es">EspaÃ±ol</option>
                            <option value="fr">FranÃ§ais</option>
                            <option value="de">Deutsch</option>
                            <option value="it">Italiano</option>
                            <option value="pt">PortuguÃªs</option>
                            <option value="ru">Ğ ÑƒÑÑĞºĞ¸Ğ¹</option>
                            <option value="ar">Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©</option>
                            <option value="hi">à¤¹à¤¿à¤¨à¥à¤¦à¥€</option>
                            <option value="th">à¹„à¸—à¸¢</option>
                            <option value="vi">Tiáº¿ng Viá»‡t</option>
                            <option value="id">Bahasa Indonesia</option>
                            <option value="ms">Bahasa Melayu</option>
                            <option value="tl">Filipino</option>
                            <option value="nl">Nederlands</option>
                            <option value="sv">Svenska</option>
                            <option value="no">Norsk</option>
                            <option value="da">Dansk</option>
                            <option value="fi">Suomi</option>
                            <option value="pl">Polski</option>
                            <option value="cs">ÄŒeÅ¡tina</option>
                            <option value="hu">Magyar</option>
                            <option value="ro">RomÃ¢nÄƒ</option>
                            <option value="bg">Ğ‘ÑŠĞ»Ğ³Ğ°Ñ€ÑĞºĞ¸</option>
                            <option value="hr">Hrvatski</option>
                            <option value="sk">SlovenÄina</option>
                            <option value="sl">SlovenÅ¡Äina</option>
                            <option value="et">Eesti</option>
                            <option value="lv">LatvieÅ¡u</option>
                            <option value="lt">LietuviÅ³</option>
                            <option value="uk">Ğ£ĞºÑ€Ğ°Ñ—Ğ½ÑÑŒĞºĞ°</option>
                            <option value="be">Ğ‘ĞµĞ»Ğ°Ñ€ÑƒÑĞºĞ°Ñ</option>
                            <option value="mk">ĞœĞ°ĞºĞµĞ´Ğ¾Ğ½ÑĞºĞ¸</option>
                            <option value="sq">Shqip</option>
                            <option value="sr">Ğ¡Ñ€Ğ¿ÑĞºĞ¸</option>
                            <option value="bs">Bosanski</option>
                            <option value="mt">Malti</option>
                            <option value="is">Ãslenska</option>
                            <option value="ga">Gaeilge</option>
                            <option value="cy">Cymraeg</option>
                            <option value="eu">Euskera</option>
                            <option value="ca">CatalÃ </option>
                            <option value="gl">Galego</option>
                            <option value="tr">TÃ¼rkÃ§e</option>
                            <option value="he">×¢×‘×¨×™×ª</option>
                            <option value="fa">ÙØ§Ø±Ø³ÛŒ</option>
                            <option value="ur">Ø§Ø±Ø¯Ùˆ</option>
                            <option value="bn">à¦¬à¦¾à¦‚à¦²à¦¾</option>
                            <option value="ta">à®¤à®®à®¿à®´à¯</option>
                            <option value="te">à°¤à±†à°²à±à°—à±</option>
                            <option value="ml">à´®à´²à´¯à´¾à´³à´‚</option>
                            <option value="kn">à²•à²¨à³à²¨à²¡</option>
                            <option value="gu">àª—à«àªœàª°àª¾àª¤à«€</option>
                            <option value="pa">à¨ªà©°à¨œà¨¾à¨¬à©€</option>
                            <option value="mr">à¤®à¤°à¤¾à¤ à¥€</option>
                            <option value="ne">à¤¨à¥‡à¤ªà¤¾à¤²à¥€</option>
                            <option value="si">à·ƒà·’à¶‚à·„à¶½</option>
                            <option value="my">á€™á€¼á€”á€ºá€™á€¬</option>
                            <option value="km">ááŸ’á˜áŸ‚áš</option>
                            <option value="lo">àº¥àº²àº§</option>
                            <option value="ka">áƒ¥áƒáƒ áƒ—áƒ£áƒšáƒ˜</option>
                            <option value="hy">Õ€Õ¡ÕµÕ¥Ö€Õ¥Õ¶</option>
                            <option value="az">AzÉ™rbaycan</option>
                            <option value="kk">ÒšĞ°Ğ·Ğ°Ò›</option>
                            <option value="ky">ĞšÑ‹Ñ€Ğ³Ñ‹Ğ·</option>
                            <option value="uz">O'zbek</option>
                            <option value="tg">Ğ¢Ğ¾Ò·Ğ¸ĞºÓ£</option>
                            <option value="mn">ĞœĞ¾Ğ½Ğ³Ğ¾Ğ»</option>
                            <option value="sw">Kiswahili</option>
                            <option value="am">áŠ áˆ›áˆ­áŠ›</option>
                            <option value="yo">YorÃ¹bÃ¡</option>
                            <option value="ig">Igbo</option>
                            <option value="ha">Hausa</option>
                            <option value="zu">isiZulu</option>
                            <option value="af">Afrikaans</option>
                        </select>
                    </div>
                </div>
            </div>

            <!-- ç¿»è­¯å€åŸŸ -->
            <div class="grid md:grid-cols-2 gap-0">
                <!-- è¼¸å…¥å€ -->
                <div class="p-6 border-r border-gray-200">
                    <div class="flex items-center justify-between mb-3">
                        <h3 class="font-medium text-gray-700">åŸæ–‡</h3>
                        <button id="clearInput" class="text-sm text-gray-500 hover:text-red-500 transition-colors">æ¸…é™¤</button>
                    </div>
                    <textarea 
                        id="inputText" 
                        placeholder="è«‹è¼¸å…¥è¦ç¿»è­¯çš„æ–‡å­—..."
                        class="w-full h-48 p-4 border border-gray-200 rounded-lg resize-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                    ></textarea>
                    <div class="flex items-center justify-between mt-3">
                        <span id="inputCount" class="text-sm text-gray-500">0 / 5000</span>
                        <button id="translateBtn" class="px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors font-medium">
                            ç¿»è­¯
                        </button>
                    </div>
                </div>

                <!-- è¼¸å‡ºå€ -->
                <div class="p-6">
                    <div class="flex items-center justify-between mb-3">
                        <h3 class="font-medium text-gray-700">è­¯æ–‡</h3>
                        <button id="copyResult" class="text-sm text-gray-500 hover:text-blue-500 transition-colors flex items-center gap-1">
                            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"></path>
                            </svg>
                            è¤‡è£½
                        </button>
                    </div>
                    <div 
                        id="outputText" 
                        class="w-full h-48 p-4 bg-gray-50 border border-gray-200 rounded-lg overflow-y-auto text-gray-700"
                    >
                        <div class="text-gray-400 italic">ç¿»è­¯çµæœå°‡é¡¯ç¤ºåœ¨é€™è£¡...</div>
                    </div>
                    <div class="mt-3 flex items-center justify-end">
                        <span id="apiStatus" class="text-xs text-gray-400"></span>
                    </div>
                </div>
            </div>
        </div>

        <!-- å¸¸ç”¨çŸ­èª -->
        <div class="max-w-4xl mx-auto mt-8">
            <h3 class="text-lg font-semibold text-gray-800 mb-4">å¸¸ç”¨çŸ­èª</h3>
            <div class="grid grid-cols-2 md:grid-cols-4 gap-3">
                <button class="quick-phrase p-3 bg-white rounded-lg shadow hover:shadow-md transition-shadow text-left" data-text="ä½ å¥½">
                    <div class="font-medium text-gray-800">ä½ å¥½</div>
                    <div class="text-sm text-gray-500">Hello</div>
                </button>
                <button class="quick-phrase p-3 bg-white rounded-lg shadow hover:shadow-md transition-shadow text-left" data-text="è¬è¬">
                    <div class="font-medium text-gray-800">è¬è¬</div>
                    <div class="text-sm text-gray-500">Thank you</div>
                </button>
                <button class="quick-phrase p-3 bg-white rounded-lg shadow hover:shadow-md transition-shadow text-left" data-text="å°ä¸èµ·">
                    <div class="font-medium text-gray-800">å°ä¸èµ·</div>
                    <div class="text-sm text-gray-500">Sorry</div>
                </button>
                <button class="quick-phrase p-3 bg-white rounded-lg shadow hover:shadow-md transition-shadow text-left" data-text="å†è¦‹">
                    <div class="font-medium text-gray-800">å†è¦‹</div>
                    <div class="text-sm text-gray-500">Goodbye</div>
                </button>
            </div>
        </div>
    </div>

    <script>
        // ç¿»è­¯å­—å…¸ - æ¨¡æ“¬ç¿»è­¯åŠŸèƒ½
        const translations = {
            'zh-TW': {
                'en': {
                    'ä½ å¥½': 'Hello',
                    'è¬è¬': 'Thank you',
                    'å°ä¸èµ·': 'Sorry',
                    'å†è¦‹': 'Goodbye',
                    'æ—©å®‰': 'Good morning',
                    'æ™šå®‰': 'Good night',
                    'è«‹': 'Please',
                    'æ˜¯': 'Yes',
                    'ä¸æ˜¯': 'No',
                    'æˆ‘æ„›ä½ ': 'I love you'
                },
                'ja': {
                    'ä½ å¥½': 'ã“ã‚“ã«ã¡ã¯',
                    'è¬è¬': 'ã‚ã‚ŠãŒã¨ã†',
                    'å°ä¸èµ·': 'ã™ã¿ã¾ã›ã‚“',
                    'å†è¦‹': 'ã•ã‚ˆã†ãªã‚‰',
                    'æ—©å®‰': 'ãŠã¯ã‚ˆã†',
                    'æ™šå®‰': 'ãŠã‚„ã™ã¿'
                },
                'ko': {
                    'ä½ å¥½': 'ì•ˆë…•í•˜ì„¸ìš”',
                    'è¬è¬': 'ê°ì‚¬í•©ë‹ˆë‹¤',
                    'å°ä¸èµ·': 'ì£„ì†¡í•©ë‹ˆë‹¤',
                    'å†è¦‹': 'ì•ˆë…•íˆ ê°€ì„¸ìš”'
                }
            },
            'en': {
                'zh-TW': {
                    'hello': 'ä½ å¥½',
                    'thank you': 'è¬è¬',
                    'sorry': 'å°ä¸èµ·',
                    'goodbye': 'å†è¦‹',
                    'good morning': 'æ—©å®‰',
                    'good night': 'æ™šå®‰',
                    'please': 'è«‹',
                    'yes': 'æ˜¯',
                    'no': 'ä¸æ˜¯',
                    'i love you': 'æˆ‘æ„›ä½ '
                }
            }
        };

        // DOM å…ƒç´ 
        const inputText = document.getElementById('inputText');
        const outputText = document.getElementById('outputText');
        const sourceLanguage = document.getElementById('sourceLanguage');
        const targetLanguage = document.getElementById('targetLanguage');
        const translateBtn = document.getElementById('translateBtn');
        const clearInput = document.getElementById('clearInput');
        const copyResult = document.getElementById('copyResult');
        const swapLanguages = document.getElementById('swapLanguages');
        const inputCount = document.getElementById('inputCount');

        const apiStatus = document.getElementById('apiStatus');
        const quickPhrases = document.querySelectorAll('.quick-phrase');

        // å­—æ•¸çµ±è¨ˆ
        inputText.addEventListener('input', function() {
            const count = this.value.length;
            inputCount.textContent = `${count} / 5000`;
            
            if (count > 5000) {
                this.value = this.value.substring(0, 5000);
                inputCount.textContent = '5000 / 5000';
            }
        });

        // APIç¿»è­¯åŠŸèƒ½
        async function translateText() {
            const text = inputText.value.trim();
            if (!text) {
                outputText.innerHTML = '<div class="text-gray-400 italic">è«‹è¼¸å…¥è¦ç¿»è­¯çš„æ–‡å­—</div>';
                return;
            }

            // é¡¯ç¤ºè¼‰å…¥ç‹€æ…‹
            outputText.innerHTML = '<div class="text-blue-500 italic flex items-center gap-2"><div class="animate-spin rounded-full h-4 w-4 border-b-2 border-blue-500"></div>æ­£åœ¨ç¿»è­¯ä¸­...</div>';

            try {
                const sourceLang = sourceLanguage.value;
                const targetLang = targetLanguage.value;
                
                // ä½¿ç”¨Google Translate API (å…è²»ç‰ˆæœ¬)
                const result = await callTranslateAPI(text, sourceLang, targetLang);
                
                outputText.innerHTML = `<div class="text-gray-800">${result.translatedText}</div>`;
                

            } catch (error) {
                console.error('ç¿»è­¯éŒ¯èª¤:', error);
                outputText.innerHTML = '<div class="text-red-500">ç¿»è­¯å¤±æ•—ï¼Œè«‹ç¨å¾Œå†è©¦ã€‚å¯èƒ½æ˜¯ç¶²è·¯é€£ç·šå•é¡Œæˆ–APIé™åˆ¶ã€‚</div>';
            }
        }

        // å‘¼å«ç¿»è­¯API
        async function callTranslateAPI(text, sourceLang, targetLang) {
            // æ–¹æ¡ˆ1: ä½¿ç”¨Google Apps Script API (æœ€å„ªå…ˆ)
            try {
                apiStatus.textContent = 'ä½¿ç”¨ Google ç¿»è­¯ API';
                
                // ä½¿ç”¨ä½ æä¾›çš„Google Apps Script ID
                const GAS_API_URL = 'https://script.google.com/macros/s/1LJJVKCEEczSl0rVqOie-0EWchEXQF4bQMPRE89pCd3XSbDLrssFasN0o/exec';
                
                const url = `${GAS_API_URL}?q=${encodeURIComponent(text)}&source=${sourceLang}&target=${targetLang}&callback=translateCallback`;
                
                // ä½¿ç”¨JSONPæ–¹å¼å‘¼å«
                const result = await callJSONP(url);
                
                if (result && result.translatedText) {
                    apiStatus.textContent = 'âœ“ Google ç¿»è­¯ API';
                    return {
                        translatedText: result.translatedText,
                        detectedLanguage: sourceLang
                    };
                }
            } catch (error) {
                console.log('Google Apps Script API å¤±æ•—ï¼Œå˜—è©¦å…¶ä»–æ–¹æ¡ˆ');
                apiStatus.textContent = 'âœ— Google API å¤±æ•—';
            }
            
            // æ–¹æ¡ˆ2: ä½¿ç”¨MyMemoryç¿»è­¯API (å…è²»)
            try {
                apiStatus.textContent = 'ä½¿ç”¨ MyMemory API';
                const response = await fetch(`https://api.mymemory.translated.net/get?q=${encodeURIComponent(text)}&langpair=${sourceLang}|${targetLang}`);
                const data = await response.json();
                
                if (data.responseStatus === 200 && data.responseData) {
                    apiStatus.textContent = 'âœ“ MyMemory API';
                    return {
                        translatedText: data.responseData.translatedText,
                        detectedLanguage: sourceLang
                    };
                }
            } catch (error) {
                console.log('MyMemory API å¤±æ•—ï¼Œå˜—è©¦å…¶ä»–æ–¹æ¡ˆ');
                apiStatus.textContent = 'âœ— MyMemory API å¤±æ•—';
            }

            // æ–¹æ¡ˆ3: ä½¿ç”¨LibreTranslate API (å¦‚æœå¯ç”¨)
            try {
                apiStatus.textContent = 'ä½¿ç”¨ LibreTranslate API';
                const response = await fetch('https://libretranslate.de/translate', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        q: text,
                        source: sourceLang,
                        target: targetLang,
                        format: 'text'
                    })
                });
                
                const data = await response.json();
                
                if (data.translatedText) {
                    apiStatus.textContent = 'âœ“ LibreTranslate API';
                    return {
                        translatedText: data.translatedText,
                        detectedLanguage: sourceLang
                    };
                }
            } catch (error) {
                console.log('LibreTranslate API å¤±æ•—ï¼Œä½¿ç”¨æœ¬åœ°ç¿»è­¯');
                apiStatus.textContent = 'âœ— LibreTranslate API å¤±æ•—';
            }

            // æ–¹æ¡ˆ4: æœ¬åœ°ç¿»è­¯ä½œç‚ºå‚™é¸
            apiStatus.textContent = 'ä½¿ç”¨æœ¬åœ°ç¿»è­¯';
            const localResult = performLocalTranslation(text, sourceLang, targetLang);
            return {
                translatedText: localResult,
                detectedLanguage: sourceLang
            };
        }

        // JSONP å‘¼å«å‡½æ•¸
        function callJSONP(url) {
            return new Promise((resolve, reject) => {
                const script = document.createElement('script');
                const callbackName = 'translateCallback_' + Date.now();
                
                // è¨­å®šå…¨åŸŸå›èª¿å‡½æ•¸
                window[callbackName] = function(data) {
                    resolve(data);
                    document.head.removeChild(script);
                    delete window[callbackName];
                };
                
                // æ›¿æ›URLä¸­çš„callbackåƒæ•¸
                const finalUrl = url.replace('callback=translateCallback', `callback=${callbackName}`);
                
                script.src = finalUrl;
                script.onerror = () => {
                    reject(new Error('JSONP request failed'));
                    document.head.removeChild(script);
                    delete window[callbackName];
                };
                
                document.head.appendChild(script);
                
                // è¨­å®šè¶…æ™‚
                setTimeout(() => {
                    if (window[callbackName]) {
                        reject(new Error('JSONP request timeout'));
                        document.head.removeChild(script);
                        delete window[callbackName];
                    }
                }, 10000);
            });
        }

        // æœ¬åœ°ç¿»è­¯å‚™é¸æ–¹æ¡ˆ
        function performLocalTranslation(text, sourceLang, targetLang) {
            // ä½¿ç”¨æœ¬åœ°å­—å…¸
            if (translations[sourceLang] && translations[sourceLang][targetLang]) {
                const dict = translations[sourceLang][targetLang];
                const lowerText = text.toLowerCase();
                
                // å®Œå…¨åŒ¹é…
                if (dict[text] || dict[lowerText]) {
                    return dict[text] || dict[lowerText];
                }
                
                // éƒ¨åˆ†åŒ¹é…
                for (let key in dict) {
                    if (lowerText.includes(key.toLowerCase())) {
                        return dict[key];
                    }
                }
            }
            
            // ç”Ÿæˆæ™ºèƒ½ç¿»è­¯
            return generateSmartTranslation(text, targetLang);
        }

        // æ™ºèƒ½ç¿»è­¯ç”Ÿæˆ
        function generateSmartTranslation(text, targetLang) {
            const smartTranslations = {
                'en': generateEnglishTranslation(text),
                'zh-TW': generateChineseTranslation(text, 'traditional'),
                'zh-CN': generateChineseTranslation(text, 'simplified'),
                'ja': generateJapaneseTranslation(text),
                'ko': generateKoreanTranslation(text),
                'es': generateSpanishTranslation(text),
                'fr': generateFrenchTranslation(text),
                'de': generateGermanTranslation(text)
            };
            
            return smartTranslations[targetLang] || `[${targetLang.toUpperCase()}] ${text}`;
        }

        // èªè¨€åµæ¸¬ (å¢å¼·ç‰ˆ)
        function detectLanguage(text) {
            // ä¸­æ–‡å­—ç¬¦
            if (/[\u4e00-\u9fff]/.test(text)) {
                return 'zh-TW';
            }
            // æ—¥æ–‡å­—ç¬¦
            else if (/[\u3040-\u309f\u30a0-\u30ff]/.test(text)) {
                return 'ja';
            }
            // éŸ“æ–‡å­—ç¬¦
            else if (/[\uac00-\ud7af]/.test(text)) {
                return 'ko';
            }
            // é˜¿æ‹‰ä¼¯æ–‡å­—ç¬¦
            else if (/[\u0600-\u06ff\u0750-\u077f]/.test(text)) {
                return 'ar';
            }
            // ä¿„æ–‡å­—ç¬¦
            else if (/[\u0400-\u04ff]/.test(text)) {
                return 'ru';
            }
            // æ³°æ–‡å­—ç¬¦
            else if (/[\u0e00-\u0e7f]/.test(text)) {
                return 'th';
            }
            // å°åœ°æ–‡å­—ç¬¦
            else if (/[\u0900-\u097f]/.test(text)) {
                return 'hi';
            }
            // å¸Œä¼¯ä¾†æ–‡å­—ç¬¦
            else if (/[\u0590-\u05ff]/.test(text)) {
                return 'he';
            }
            // å¸Œè‡˜æ–‡å­—ç¬¦
            else if (/[\u0370-\u03ff]/.test(text)) {
                return 'el';
            }
            // è‹±æ–‡å’Œå…¶ä»–æ‹‰ä¸å­—ç¬¦
            else if (/[a-zA-Z]/.test(text)) {
                return 'en';
            }
            return 'en';
        }



        // å„èªè¨€ç¿»è­¯ç”Ÿæˆå‡½æ•¸
        function generateEnglishTranslation(text) {
            const commonPhrases = {
                'ä½ å¥½': 'Hello',
                'è¬è¬': 'Thank you',
                'å°ä¸èµ·': 'Sorry',
                'å†è¦‹': 'Goodbye',
                'æ—©å®‰': 'Good morning',
                'æ™šå®‰': 'Good night',
                'æˆ‘æ„›ä½ ': 'I love you',
                'è«‹': 'Please',
                'æ˜¯': 'Yes',
                'ä¸æ˜¯': 'No'
            };
            return commonPhrases[text] || `"${text}" (English translation)`;
        }

        function generateChineseTranslation(text, variant) {
            const traditionalPhrases = {
                'hello': 'ä½ å¥½',
                'thank you': 'è¬è¬',
                'sorry': 'å°ä¸èµ·',
                'goodbye': 'å†è¦‹',
                'good morning': 'æ—©å®‰',
                'good night': 'æ™šå®‰',
                'i love you': 'æˆ‘æ„›ä½ ',
                'please': 'è«‹',
                'yes': 'æ˜¯',
                'no': 'ä¸æ˜¯'
            };
            
            const simplifiedPhrases = {
                'hello': 'ä½ å¥½',
                'thank you': 'è°¢è°¢',
                'sorry': 'å¯¹ä¸èµ·',
                'goodbye': 'å†è§',
                'good morning': 'æ—©å®‰',
                'good night': 'æ™šå®‰',
                'i love you': 'æˆ‘çˆ±ä½ ',
                'please': 'è¯·',
                'yes': 'æ˜¯',
                'no': 'ä¸æ˜¯'
            };
            
            const phrases = variant === 'traditional' ? traditionalPhrases : simplifiedPhrases;
            return phrases[text.toLowerCase()] || `"${text}" (ä¸­æ–‡ç¿»è­¯)`;
        }

        function generateJapaneseTranslation(text) {
            const phrases = {
                'hello': 'ã“ã‚“ã«ã¡ã¯',
                'thank you': 'ã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã™',
                'sorry': 'ã™ã¿ã¾ã›ã‚“',
                'goodbye': 'ã•ã‚ˆã†ãªã‚‰',
                'good morning': 'ãŠã¯ã‚ˆã†ã”ã–ã„ã¾ã™',
                'good night': 'ãŠã‚„ã™ã¿ãªã•ã„',
                'i love you': 'æ„›ã—ã¦ã„ã¾ã™',
                'please': 'ãŠé¡˜ã„ã—ã¾ã™',
                'yes': 'ã¯ã„',
                'no': 'ã„ã„ãˆ'
            };
            return phrases[text.toLowerCase()] || `"${text}" (æ—¥æœ¬èªç¿»è¨³)`;
        }

        function generateKoreanTranslation(text) {
            const phrases = {
                'hello': 'ì•ˆë…•í•˜ì„¸ìš”',
                'thank you': 'ê°ì‚¬í•©ë‹ˆë‹¤',
                'sorry': 'ì£„ì†¡í•©ë‹ˆë‹¤',
                'goodbye': 'ì•ˆë…•íˆ ê°€ì„¸ìš”',
                'good morning': 'ì¢‹ì€ ì•„ì¹¨ì…ë‹ˆë‹¤',
                'good night': 'ì¢‹ì€ ë°¤ ë˜ì„¸ìš”',
                'i love you': 'ì‚¬ë‘í•´ìš”',
                'please': 'ë¶€íƒí•©ë‹ˆë‹¤',
                'yes': 'ë„¤',
                'no': 'ì•„ë‹ˆìš”'
            };
            return phrases[text.toLowerCase()] || `"${text}" (í•œêµ­ì–´ ë²ˆì—­)`;
        }

        function generateSpanishTranslation(text) {
            const phrases = {
                'hello': 'Hola',
                'thank you': 'Gracias',
                'sorry': 'Lo siento',
                'goodbye': 'AdiÃ³s',
                'good morning': 'Buenos dÃ­as',
                'good night': 'Buenas noches',
                'i love you': 'Te amo',
                'please': 'Por favor',
                'yes': 'SÃ­',
                'no': 'No'
            };
            return phrases[text.toLowerCase()] || `"${text}" (TraducciÃ³n al espaÃ±ol)`;
        }

        function generateFrenchTranslation(text) {
            const phrases = {
                'hello': 'Bonjour',
                'thank you': 'Merci',
                'sorry': 'DÃ©solÃ©',
                'goodbye': 'Au revoir',
                'good morning': 'Bonjour',
                'good night': 'Bonne nuit',
                'i love you': 'Je t\'aime',
                'please': 'S\'il vous plaÃ®t',
                'yes': 'Oui',
                'no': 'Non'
            };
            return phrases[text.toLowerCase()] || `"${text}" (Traduction franÃ§aise)`;
        }

        function generateGermanTranslation(text) {
            const phrases = {
                'hello': 'Hallo',
                'thank you': 'Danke',
                'sorry': 'Entschuldigung',
                'goodbye': 'Auf Wiedersehen',
                'good morning': 'Guten Morgen',
                'good night': 'Gute Nacht',
                'i love you': 'Ich liebe dich',
                'please': 'Bitte',
                'yes': 'Ja',
                'no': 'Nein'
            };
            return phrases[text.toLowerCase()] || `"${text}" (Deutsche Ãœbersetzung)`;
        }

        // å…¶ä»–èªè¨€çš„ç°¡åŒ–ç¿»è­¯å‡½æ•¸
        function generateItalianTranslation(text) {
            return `"${text}" (Traduzione italiana)`;
        }
        function generatePortugueseTranslation(text) {
            return `"${text}" (TraduÃ§Ã£o portuguesa)`;
        }
        function generateRussianTranslation(text) {
            return `"${text}" (Ğ ÑƒÑÑĞºĞ¸Ğ¹ Ğ¿ĞµÑ€ĞµĞ²Ğ¾Ğ´)`;
        }
        function generateArabicTranslation(text) {
            return `"${text}" (Ø§Ù„ØªØ±Ø¬Ù…Ø© Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©)`;
        }
        function generateHindiTranslation(text) {
            return `"${text}" (à¤¹à¤¿à¤‚à¤¦à¥€ à¤…à¤¨à¥à¤µà¤¾à¤¦)`;
        }
        function generateThaiTranslation(text) {
            return `"${text}" (à¸à¸²à¸£à¹à¸›à¸¥à¸ à¸²à¸©à¸²à¹„à¸—à¸¢)`;
        }
        function generateVietnameseTranslation(text) {
            return `"${text}" (Báº£n dá»‹ch tiáº¿ng Viá»‡t)`;
        }
        function generateIndonesianTranslation(text) {
            return `"${text}" (Terjemahan Indonesia)`;
        }
        function generateMalayTranslation(text) {
            return `"${text}" (Terjemahan Melayu)`;
        }
        function generateFilipinoTranslation(text) {
            return `"${text}" (Salin sa Filipino)`;
        }
        function generateDutchTranslation(text) {
            return `"${text}" (Nederlandse vertaling)`;
        }
        function generateSwedishTranslation(text) {
            return `"${text}" (Svensk Ã¶versÃ¤ttning)`;
        }
        function generateNorwegianTranslation(text) {
            return `"${text}" (Norsk oversettelse)`;
        }
        function generateDanishTranslation(text) {
            return `"${text}" (Dansk oversÃ¦ttelse)`;
        }
        function generateFinnishTranslation(text) {
            return `"${text}" (Suomenkielinen kÃ¤Ã¤nnÃ¶s)`;
        }
        function generatePolishTranslation(text) {
            return `"${text}" (Polskie tÅ‚umaczenie)`;
        }
        function generateCzechTranslation(text) {
            return `"${text}" (ÄŒeskÃ½ pÅ™eklad)`;
        }
        function generateHungarianTranslation(text) {
            return `"${text}" (Magyar fordÃ­tÃ¡s)`;
        }
        function generateRomanianTranslation(text) {
            return `"${text}" (Traducere romÃ¢nÄƒ)`;
        }
        function generateTurkishTranslation(text) {
            return `"${text}" (TÃ¼rkÃ§e Ã§eviri)`;
        }
        function generateHebrewTranslation(text) {
            return `"${text}" (×ª×¨×’×•× ×¢×‘×¨×™)`;
        }
        function generatePersianTranslation(text) {
            return `"${text}" (ØªØ±Ø¬Ù…Ù‡ ÙØ§Ø±Ø³ÛŒ)`;
        }
        function generateUrduTranslation(text) {
            return `"${text}" (Ø§Ø±Ø¯Ùˆ ØªØ±Ø¬Ù…Û)`;
        }
        function generateBengaliTranslation(text) {
            return `"${text}" (à¦¬à¦¾à¦‚à¦²à¦¾ à¦…à¦¨à§à¦¬à¦¾à¦¦)`;
        }
        function generateTamilTranslation(text) {
            return `"${text}" (à®¤à®®à®¿à®´à¯ à®®à¯Šà®´à®¿à®ªà¯†à®¯à®°à¯à®ªà¯à®ªà¯)`;
        }
        function generateSwahiliTranslation(text) {
            return `"${text}" (Tafsiri ya Kiswahili)`;
        }

        // äº‹ä»¶ç›£è½å™¨
        translateBtn.addEventListener('click', translateText);
        
        inputText.addEventListener('keydown', function(e) {
            if (e.key === 'Enter' && e.ctrlKey) {
                translateText();
            }
        });

        clearInput.addEventListener('click', function() {
            inputText.value = '';
            outputText.innerHTML = '<div class="text-gray-400 italic">ç¿»è­¯çµæœå°‡é¡¯ç¤ºåœ¨é€™è£¡...</div>';
            inputCount.textContent = '0 / 5000';
        });

        copyResult.addEventListener('click', function() {
            const resultText = outputText.textContent;
            if (resultText && !resultText.includes('ç¿»è­¯çµæœå°‡é¡¯ç¤ºåœ¨é€™è£¡')) {
                navigator.clipboard.writeText(resultText).then(() => {
                    copyResult.innerHTML = '<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg>å·²è¤‡è£½';
                    setTimeout(() => {
                        copyResult.innerHTML = '<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"></path></svg>è¤‡è£½';
                    }, 2000);
                });
            }
        });

        swapLanguages.addEventListener('click', function() {
            const temp = sourceLanguage.value;
            sourceLanguage.value = targetLanguage.value;
            targetLanguage.value = temp;
            
            // äº¤æ›æ–‡å­—å…§å®¹
            const inputValue = inputText.value;
            const outputValue = outputText.textContent;
            if (outputValue && !outputValue.includes('ç¿»è­¯çµæœå°‡é¡¯ç¤ºåœ¨é€™è£¡')) {
                inputText.value = outputValue;
                translateText();
            }
        });

        // å¸¸ç”¨çŸ­èªé»æ“Š
        quickPhrases.forEach(phrase => {
            phrase.addEventListener('click', function() {
                const text = this.dataset.text;
                inputText.value = text;
                inputCount.textContent = `${text.length} / 5000`;
                translateText();
            });
        });
    </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'97789298d1dff1bc',t:'MTc1NjYwMTgzNC4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
