<!DOCTYPE html>
<html lang="zh-TW"><head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å°éŠæˆ²</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@300;400;500;700&display=swap');
        body { font-family: 'Noto Sans TC', sans-serif; }
        
        .game-card {
            background: linear-gradient(135deg, #1f2937 0%, #374151 100%);
            transition: all 0.3s ease;
            border: 1px solid #4b5563;
        }
        
        .game-card:hover {
            transform: translateY(-8px);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.4);
            border-color: #60a5fa;
        }
        
        .neon-text {
            text-shadow: 0 0 10px #60a5fa, 0 0 20px #60a5fa, 0 0 30px #60a5fa;
        }
        
        .game-screen {
            background: linear-gradient(135deg, #111827 0%, #1f2937 100%);
            border: 2px solid #374151;
        }
        
        .btn-primary {
            background: linear-gradient(135deg, #3b82f6 0%, #1d4ed8 100%);
            transition: all 0.3s ease;
        }
        
        .btn-primary:hover {
            background: linear-gradient(135deg, #2563eb 0%, #1e40af 100%);
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(59, 130, 246, 0.3);
        }
    </style>
</head>
<body class="bg-black text-white min-h-screen">
    <div id="gameCenter" class="container mx-auto px-4 py-8">
        <!-- æ¨™é¡Œ -->
        <div class="text-center mb-12">
            <h1 class="text-6xl font-bold neon-text mb-4">ğŸ® å°éŠæˆ²</h1>
            <p class="text-xl text-gray-300">é¸æ“‡ä½ å–œæ­¡çš„å°éŠæˆ²é–‹å§‹ç©å§ï¼</p>
        </div>

        <!-- éŠæˆ²é¸å–® -->
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-8 max-w-7xl mx-auto">
            <!-- çŒœæ•¸å­—éŠæˆ² -->
            <div class="game-card rounded-2xl p-6 cursor-pointer" onclick="startGame('guess')">
                <div class="text-center">
                    <div class="text-6xl mb-4">ğŸ¯</div>
                    <h3 class="text-2xl font-bold mb-3">çŒœæ•¸å­—</h3>
                    <p class="text-gray-300 mb-4">æˆ‘æƒ³äº†ä¸€å€‹1-100çš„æ•¸å­—ï¼Œä½ èƒ½çŒœä¸­å—ï¼Ÿ</p>
                    <div class="btn-primary px-6 py-3 rounded-lg font-semibold">é–‹å§‹éŠæˆ²</div>
                </div>
            </div>

            <!-- è¨˜æ†¶éŠæˆ² -->
            <div class="game-card rounded-2xl p-6 cursor-pointer" onclick="startGame('memory')">
                <div class="text-center">
                    <div class="text-6xl mb-4">ğŸ§ </div>
                    <h3 class="text-2xl font-bold mb-3">è¨˜æ†¶æŒ‘æˆ°</h3>
                    <p class="text-gray-300 mb-4">è¨˜ä½é¡è‰²åºåˆ—ï¼Œç„¶å¾Œé‡è¤‡å®ƒå€‘ï¼</p>
                    <div class="btn-primary px-6 py-3 rounded-lg font-semibold">é–‹å§‹éŠæˆ²</div>
                </div>
            </div>

            <!-- åæ‡‰éŠæˆ² -->
            <div class="game-card rounded-2xl p-6 cursor-pointer" onclick="startGame('reaction')">
                <div class="text-center">
                    <div class="text-6xl mb-4">âš¡</div>
                    <h3 class="text-2xl font-bold mb-3">åæ‡‰æ¸¬è©¦</h3>
                    <p class="text-gray-300 mb-4">æ¸¬è©¦ä½ çš„åæ‡‰é€Ÿåº¦æœ‰å¤šå¿«ï¼</p>
                    <div class="btn-primary px-6 py-3 rounded-lg font-semibold">é–‹å§‹éŠæˆ²</div>
                </div>
            </div>

            <!-- äº•å­—éŠæˆ² -->
            <div class="game-card rounded-2xl p-6 cursor-pointer" onclick="startGame('tictactoe')">
                <div class="text-center">
                    <div class="text-6xl mb-4">â­•</div>
                    <h3 class="text-2xl font-bold mb-3">äº•å­—éŠæˆ²</h3>
                    <p class="text-gray-300 mb-4">ç¶“å…¸çš„ä¸‰é€£ç·šéŠæˆ²ï¼ŒæŒ‘æˆ°é›»è…¦ï¼</p>
                    <div class="btn-primary px-6 py-3 rounded-lg font-semibold">é–‹å§‹éŠæˆ²</div>
                </div>
            </div>

            <!-- æ‰“åœ°é¼  -->
            <div class="game-card rounded-2xl p-6 cursor-pointer" onclick="startGame('whack')">
                <div class="text-center">
                    <div class="text-6xl mb-4">ğŸ”¨</div>
                    <h3 class="text-2xl font-bold mb-3">æ‰“åœ°é¼ </h3>
                    <p class="text-gray-300 mb-4">å¿«é€Ÿé»æ“Šå‡ºç¾çš„åœ°é¼ å¾—åˆ†ï¼</p>
                    <div class="btn-primary px-6 py-3 rounded-lg font-semibold">é–‹å§‹éŠæˆ²</div>
                </div>
            </div>

            <!-- è²ªåƒè›‡ -->
            <div class="game-card rounded-2xl p-6 cursor-pointer" onclick="startGame('snake')">
                <div class="text-center">
                    <div class="text-6xl mb-4">ğŸ</div>
                    <h3 class="text-2xl font-bold mb-3">è²ªåƒè›‡</h3>
                    <p class="text-gray-300 mb-4">æ§åˆ¶è›‡åƒé£Ÿç‰©ï¼Œä½†åˆ¥æ’åˆ°è‡ªå·±ï¼</p>
                    <div class="btn-primary px-6 py-3 rounded-lg font-semibold">é–‹å§‹éŠæˆ²</div>
                </div>
            </div>

            <!-- æ“²éª°å­éŠæˆ² -->
            <div class="game-card rounded-2xl p-6 cursor-pointer" onclick="startGame('dice')">
                <div class="text-center">
                    <div class="text-6xl mb-4">ğŸ²</div>
                    <h3 class="text-2xl font-bold mb-3">æ“²éª°å­</h3>
                    <p class="text-gray-300 mb-4">é æ¸¬éª°å­é»æ•¸ï¼Œæ¸¬è©¦ä½ çš„é‹æ°£ï¼</p>
                    <div class="btn-primary px-6 py-3 rounded-lg font-semibold">é–‹å§‹éŠæˆ²</div>
                </div>
            </div>

            <!-- 2048éŠæˆ² -->
            <div class="game-card rounded-2xl p-6 cursor-pointer" onclick="startGame('2048')">
                <div class="text-center">
                    <div class="text-6xl mb-4">ğŸ”¢</div>
                    <h3 class="text-2xl font-bold mb-3">2048</h3>
                    <p class="text-gray-300 mb-4">åˆä½µæ•¸å­—æ–¹å¡Šï¼Œé”åˆ°2048ï¼</p>
                    <div class="btn-primary px-6 py-3 rounded-lg font-semibold">é–‹å§‹éŠæˆ²</div>
                </div>
            </div>

            <!-- é£›é¢éŠæˆ² -->
            <div class="game-card rounded-2xl p-6 cursor-pointer" onclick="startGame('dart')">
                <div class="text-center">
                    <div class="text-6xl mb-4">ğŸ¯</div>
                    <h3 class="text-2xl font-bold mb-3">é£›é¢</h3>
                    <p class="text-gray-300 mb-4">ç„æº–é¶å¿ƒï¼Œæ¸¬è©¦ä½ çš„æº–ç¢ºåº¦ï¼</p>
                    <div class="btn-primary px-6 py-3 rounded-lg font-semibold">é–‹å§‹éŠæˆ²</div>
                </div>
            </div>

            <!-- ç¿»ç‰Œé…å° -->
            <div class="game-card rounded-2xl p-6 cursor-pointer" onclick="startGame('flip')">
                <div class="text-center">
                    <div class="text-6xl mb-4">ğŸƒ</div>
                    <h3 class="text-2xl font-bold mb-3">ç¿»ç‰Œé…å°</h3>
                    <p class="text-gray-300 mb-4">ç¿»é–‹å¡ç‰Œæ‰¾åˆ°ç›¸åŒçš„é…å°ï¼</p>
                    <div class="btn-primary px-6 py-3 rounded-lg font-semibold">é–‹å§‹éŠæˆ²</div>
                </div>
            </div>

            <!-- æ‹¼åœ–æ»‘å¡Š -->
            <div class="game-card rounded-2xl p-6 cursor-pointer" onclick="startGame('puzzle')">
                <div class="text-center">
                    <div class="text-6xl mb-4">ğŸ§©</div>
                    <h3 class="text-2xl font-bold mb-3">æ‹¼åœ–æ»‘å¡Š</h3>
                    <p class="text-gray-300 mb-4">ç§»å‹•æ–¹å¡Šå®Œæˆæ•¸å­—æ‹¼åœ–ï¼</p>
                    <div class="btn-primary px-6 py-3 rounded-lg font-semibold">é–‹å§‹éŠæˆ²</div>
                </div>
            </div>

            <!-- å¹³è¡¡éŠæˆ² -->
            <div class="game-card rounded-2xl p-6 cursor-pointer" onclick="startGame('balance')">
                <div class="text-center">
                    <div class="text-6xl mb-4">âš–ï¸</div>
                    <h3 class="text-2xl font-bold mb-3">å¹³è¡¡éŠæˆ²</h3>
                    <p class="text-gray-300 mb-4">ä¿æŒçƒçš„å¹³è¡¡ï¼Œåˆ¥è®“å®ƒæ‰ä¸‹ä¾†ï¼</p>
                    <div class="btn-primary px-6 py-3 rounded-lg font-semibold">é–‹å§‹éŠæˆ²</div>
                </div>
            </div>
        </div>
    </div>

    <!-- éŠæˆ²ç•«é¢ -->
    <div id="gameScreen" class="hidden fixed inset-0 bg-black bg-opacity-95 flex items-center justify-center p-4">
        <div class="game-screen rounded-2xl p-8 max-w-2xl w-full max-h-[90vh] overflow-y-auto">
            <div class="flex justify-between items-center mb-6">
                <h2 id="gameTitle" class="text-3xl font-bold neon-text"></h2>
                <button onclick="backToMenu()" class="bg-red-600 hover:bg-red-700 px-4 py-2 rounded-lg transition-colors">
                    è¿”å›é¸å–®
                </button>
            </div>
            <div id="gameContent" class="text-center"></div>
        </div>
    </div>

    <script>
        let currentGame = null;
        let gameData = {};

        function startGame(gameType) {
            currentGame = gameType;
            document.getElementById('gameCenter').classList.add('hidden');
            document.getElementById('gameScreen').classList.remove('hidden');
            
            switch(gameType) {
                case 'guess':
                    startGuessGame();
                    break;
                case 'memory':
                    startMemoryGame();
                    break;
                case 'reaction':
                    startReactionGame();
                    break;
                case 'tictactoe':
                    startTicTacToe();
                    break;
                case 'whack':
                    startWhackMole();
                    break;
                case 'snake':
                    startSnakeGame();
                    break;
                case 'dice':
                    startDiceGame();
                    break;
                case '2048':
                    start2048Game();
                    break;
                case 'dart':
                    startDartGame();
                    break;
                case 'flip':
                    startFlipGame();
                    break;
                case 'puzzle':
                    startPuzzleGame();
                    break;
                case 'balance':
                    startBalanceGame();
                    break;
            }
        }

        function backToMenu() {
            document.getElementById('gameCenter').classList.remove('hidden');
            document.getElementById('gameScreen').classList.add('hidden');
            currentGame = null;
            gameData = {};
            // æ¸…é™¤æ‰€æœ‰è¨ˆæ™‚å™¨
            if (gameData.gameLoop) clearInterval(gameData.gameLoop);
            if (gameData.timerInterval) clearInterval(gameData.timerInterval);
            if (gameData.moleInterval) clearInterval(gameData.moleInterval);
            if (gameData.balanceLoop) clearInterval(gameData.balanceLoop);
        }

        // çŒœæ•¸å­—éŠæˆ²
        function startGuessGame() {
            document.getElementById('gameTitle').textContent = 'ğŸ¯ çŒœæ•¸å­—éŠæˆ²';
            gameData.target = Math.floor(Math.random() * 100) + 1;
            gameData.attempts = 0;
            
            document.getElementById('gameContent').innerHTML = `
                <div class="space-y-6">
                    <p class="text-xl">æˆ‘æƒ³äº†ä¸€å€‹1åˆ°100ä¹‹é–“çš„æ•¸å­—ï¼Œä½ èƒ½çŒœä¸­å—ï¼Ÿ</p>
                    <div class="space-y-4">
                        <input type="number" id="guessInput" min="1" max="100" 
                               class="bg-gray-800 border border-gray-600 rounded-lg px-4 py-3 text-xl text-center w-32" 
                               placeholder="è¼¸å…¥æ•¸å­—">
                        <br>
                        <button onclick="makeGuess()" class="btn-primary px-8 py-3 rounded-lg text-lg font-semibold">
                            çŒœæ¸¬
                        </button>
                    </div>
                    <div id="guessResult" class="text-xl font-semibold"></div>
                    <div id="guessAttempts" class="text-gray-300">å˜—è©¦æ¬¡æ•¸: 0</div>
                </div>
            `;
        }

        function makeGuess() {
            const input = document.getElementById('guessInput');
            const guess = parseInt(input.value);
            const result = document.getElementById('guessResult');
            const attempts = document.getElementById('guessAttempts');
            
            if (!guess || guess < 1 || guess > 100) {
                result.textContent = 'è«‹è¼¸å…¥1åˆ°100ä¹‹é–“çš„æ•¸å­—ï¼';
                result.className = 'text-xl font-semibold text-red-400';
                return;
            }
            
            gameData.attempts++;
            attempts.textContent = `å˜—è©¦æ¬¡æ•¸: ${gameData.attempts}`;
            
            if (guess === gameData.target) {
                result.textContent = `ğŸ‰ æ­å–œï¼ä½ çŒœå°äº†ï¼ç­”æ¡ˆæ˜¯ ${gameData.target}`;
                result.className = 'text-xl font-semibold text-green-400';
                input.disabled = true;
            } else if (guess < gameData.target) {
                result.textContent = 'å¤ªå°äº†ï¼å†è©¦è©¦æ›´å¤§çš„æ•¸å­—';
                result.className = 'text-xl font-semibold text-yellow-400';
            } else {
                result.textContent = 'å¤ªå¤§äº†ï¼å†è©¦è©¦æ›´å°çš„æ•¸å­—';
                result.className = 'text-xl font-semibold text-yellow-400';
            }
            
            input.value = '';
            input.focus();
        }

        // è¨˜æ†¶éŠæˆ²
        function startMemoryGame() {
            document.getElementById('gameTitle').textContent = 'ğŸ§  è¨˜æ†¶æŒ‘æˆ°';
            gameData.sequence = [];
            gameData.playerSequence = [];
            gameData.level = 1;
            gameData.isPlaying = false;
            
            document.getElementById('gameContent').innerHTML = `
                <div class="space-y-6">
                    <p class="text-xl">è¨˜ä½é¡è‰²åºåˆ—ï¼Œç„¶å¾Œé‡è¤‡å®ƒå€‘ï¼</p>
                    <div id="memoryLevel" class="text-lg text-blue-400">é—œå¡: 1</div>
                    <div class="grid grid-cols-2 gap-4 max-w-xs mx-auto">
                        <button id="red" class="w-24 h-24 bg-red-600 rounded-lg" onclick="playerClick('red')"></button>
                        <button id="blue" class="w-24 h-24 bg-blue-600 rounded-lg" onclick="playerClick('blue')"></button>
                        <button id="green" class="w-24 h-24 bg-green-600 rounded-lg" onclick="playerClick('green')"></button>
                        <button id="yellow" class="w-24 h-24 bg-yellow-600 rounded-lg" onclick="playerClick('yellow')"></button>
                    </div>
                    <button onclick="startMemorySequence()" class="btn-primary px-8 py-3 rounded-lg text-lg font-semibold">
                        é–‹å§‹
                    </button>
                    <div id="memoryMessage" class="text-lg"></div>
                </div>
            `;
        }

        function startMemorySequence() {
            const colors = ['red', 'blue', 'green', 'yellow'];
            gameData.sequence.push(colors[Math.floor(Math.random() * 4)]);
            gameData.playerSequence = [];
            gameData.isPlaying = true;
            
            document.getElementById('memoryMessage').textContent = 'è§€çœ‹åºåˆ—...';
            
            let i = 0;
            const interval = setInterval(() => {
                if (i < gameData.sequence.length) {
                    flashColor(gameData.sequence[i]);
                    i++;
                } else {
                    clearInterval(interval);
                    document.getElementById('memoryMessage').textContent = 'ç¾åœ¨è¼ªåˆ°ä½ äº†ï¼';
                }
            }, 800);
        }

        function flashColor(color) {
            const button = document.getElementById(color);
            button.style.opacity = '1';
            button.style.transform = 'scale(1.1)';
            setTimeout(() => {
                button.style.opacity = '0.7';
                button.style.transform = 'scale(1)';
            }, 400);
        }

        function playerClick(color) {
            if (!gameData.isPlaying) return;
            
            flashColor(color);
            gameData.playerSequence.push(color);
            
            const currentIndex = gameData.playerSequence.length - 1;
            
            if (gameData.playerSequence[currentIndex] !== gameData.sequence[currentIndex]) {
                document.getElementById('memoryMessage').textContent = 'âŒ éŒ¯èª¤ï¼éŠæˆ²çµæŸ';
                gameData.isPlaying = false;
                return;
            }
            
            if (gameData.playerSequence.length === gameData.sequence.length) {
                gameData.level++;
                document.getElementById('memoryLevel').textContent = `é—œå¡: ${gameData.level}`;
                document.getElementById('memoryMessage').textContent = 'âœ… æ­£ç¢ºï¼æº–å‚™ä¸‹ä¸€é—œ...';
                setTimeout(() => {
                    startMemorySequence();
                }, 1500);
            }
        }

        // åæ‡‰æ¸¬è©¦éŠæˆ²
        function startReactionGame() {
            document.getElementById('gameTitle').textContent = 'âš¡ åæ‡‰æ¸¬è©¦';
            gameData.startTime = 0;
            gameData.bestTime = localStorage.getItem('bestReaction') || 'ç„¡';
            
            document.getElementById('gameContent').innerHTML = `
                <div class="space-y-6">
                    <p class="text-xl">ç•¶èƒŒæ™¯è®Šç¶ æ™‚ç«‹å³é»æ“Šï¼</p>
                    <div id="reactionArea" class="w-80 h-80 mx-auto bg-red-600 rounded-2xl flex items-center justify-center cursor-pointer text-2xl font-bold"
                         onclick="reactionClick()">
                        é»æ“Šé–‹å§‹
                    </div>
                    <div id="reactionResult" class="text-xl"></div>
                    <div class="text-gray-300">æœ€ä½³ç´€éŒ„: ${gameData.bestTime}ms</div>
                </div>
            `;
        }

        function reactionClick() {
            const area = document.getElementById('reactionArea');
            const result = document.getElementById('reactionResult');
            
            if (area.classList.contains('bg-red-600')) {
                area.classList.remove('bg-red-600');
                area.classList.add('bg-yellow-600');
                area.textContent = 'ç­‰å¾…...';
                
                const delay = Math.random() * 4000 + 1000;
                setTimeout(() => {
                    area.classList.remove('bg-yellow-600');
                    area.classList.add('bg-green-600');
                    area.textContent = 'é»æ“Šï¼';
                    gameData.startTime = Date.now();
                }, delay);
            } else if (area.classList.contains('bg-green-600')) {
                const reactionTime = Date.now() - gameData.startTime;
                result.textContent = `ä½ çš„åæ‡‰æ™‚é–“: ${reactionTime}ms`;
                
                if (!localStorage.getItem('bestReaction') || reactionTime < parseInt(localStorage.getItem('bestReaction'))) {
                    localStorage.setItem('bestReaction', reactionTime);
                    result.textContent += ' ğŸ‰ æ–°ç´€éŒ„ï¼';
                }
                
                area.classList.remove('bg-green-600');
                area.classList.add('bg-red-600');
                area.textContent = 'å†è©¦ä¸€æ¬¡';
            }
        }

        // äº•å­—éŠæˆ²
        function startTicTacToe() {
            document.getElementById('gameTitle').textContent = 'â­• äº•å­—éŠæˆ²';
            gameData.board = Array(9).fill('');
            gameData.currentPlayer = 'X';
            gameData.gameOver = false;
            
            document.getElementById('gameContent').innerHTML = `
                <div class="space-y-6">
                    <p class="text-xl">ä½ æ˜¯ Xï¼Œé›»è…¦æ˜¯ O</p>
                    <div class="grid grid-cols-3 gap-2 max-w-xs mx-auto">
                        ${Array(9).fill(0).map((_, i) => 
                            `<button id="cell${i}" class="w-20 h-20 bg-gray-700 border border-gray-500 rounded-lg text-3xl font-bold hover:bg-gray-600" 
                                     onclick="makeMove(${i})"></button>`
                        ).join('')}
                    </div>
                    <div id="ticTacResult" class="text-xl font-semibold"></div>
                    <button onclick="resetTicTacToe()" class="bg-gray-600 hover:bg-gray-700 px-6 py-2 rounded-lg">
                        é‡æ–°é–‹å§‹
                    </button>
                </div>
            `;
        }

        function makeMove(index) {
            if (gameData.board[index] || gameData.gameOver) return;
            
            gameData.board[index] = 'X';
            document.getElementById(`cell${index}`).textContent = 'X';
            
            if (checkWinner()) return;
            
            setTimeout(() => {
                computerMove();
            }, 500);
        }

        function computerMove() {
            const emptyCells = gameData.board.map((cell, index) => cell === '' ? index : null).filter(val => val !== null);
            if (emptyCells.length === 0) return;
            
            const randomIndex = emptyCells[Math.floor(Math.random() * emptyCells.length)];
            gameData.board[randomIndex] = 'O';
            document.getElementById(`cell${randomIndex}`).textContent = 'O';
            
            checkWinner();
        }

        function checkWinner() {
            const winPatterns = [
                [0,1,2], [3,4,5], [6,7,8],
                [0,3,6], [1,4,7], [2,5,8],
                [0,4,8], [2,4,6]
            ];
            
            for (let pattern of winPatterns) {
                const [a, b, c] = pattern;
                if (gameData.board[a] && gameData.board[a] === gameData.board[b] && gameData.board[a] === gameData.board[c]) {
                    gameData.gameOver = true;
                    document.getElementById('ticTacResult').textContent = 
                        gameData.board[a] === 'X' ? 'ğŸ‰ ä½ è´äº†ï¼' : 'ğŸ˜… é›»è…¦è´äº†ï¼';
                    return true;
                }
            }
            
            if (!gameData.board.includes('')) {
                gameData.gameOver = true;
                document.getElementById('ticTacResult').textContent = 'ğŸ¤ å¹³å±€ï¼';
                return true;
            }
            
            return false;
        }

        function resetTicTacToe() {
            gameData.board = Array(9).fill('');
            gameData.gameOver = false;
            document.getElementById('ticTacResult').textContent = '';
            for (let i = 0; i < 9; i++) {
                document.getElementById(`cell${i}`).textContent = '';
            }
        }

        // æ‰“åœ°é¼ éŠæˆ²
        function startWhackMole() {
            document.getElementById('gameTitle').textContent = 'ğŸ”¨ æ‰“åœ°é¼ ';
            gameData.score = 0;
            gameData.timeLeft = 30;
            gameData.moleInterval = null;
            gameData.timerInterval = null;
            
            document.getElementById('gameContent').innerHTML = `
                <div class="space-y-6">
                    <div class="flex justify-between text-xl">
                        <div>åˆ†æ•¸: <span id="whackScore">0</span></div>
                        <div>æ™‚é–“: <span id="whackTime">30</span>s</div>
                    </div>
                    <div class="grid grid-cols-3 gap-4 max-w-sm mx-auto">
                        ${Array(9).fill(0).map((_, i) => 
                            `<div id="hole${i}" class="w-20 h-20 bg-gray-800 border-2 border-gray-600 rounded-full flex items-center justify-center text-4xl cursor-pointer hover:bg-gray-700" 
                                  onclick="whackMole(${i})">ğŸ•³ï¸</div>`
                        ).join('')}
                    </div>
                    <button onclick="startWhackGame()" class="btn-primary px-8 py-3 rounded-lg text-lg font-semibold">
                        é–‹å§‹éŠæˆ²
                    </button>
                </div>
            `;
        }

        function startWhackGame() {
            gameData.score = 0;
            gameData.timeLeft = 30;
            document.getElementById('whackScore').textContent = '0';
            document.getElementById('whackTime').textContent = '30';
            
            gameData.timerInterval = setInterval(() => {
                gameData.timeLeft--;
                document.getElementById('whackTime').textContent = gameData.timeLeft;
                if (gameData.timeLeft <= 0) {
                    endWhackGame();
                }
            }, 1000);
            
            gameData.moleInterval = setInterval(() => {
                showMole();
            }, 1000);
        }

        function showMole() {
            const holes = Array.from({length: 9}, (_, i) => i);
            const randomHole = holes[Math.floor(Math.random() * holes.length)];
            const hole = document.getElementById(`hole${randomHole}`);
            
            hole.textContent = 'ğŸ¹';
            hole.classList.add('bg-green-600');
            
            setTimeout(() => {
                if (hole.textContent === 'ğŸ¹') {
                    hole.textContent = 'ğŸ•³ï¸';
                    hole.classList.remove('bg-green-600');
                }
            }, 800);
        }

        function whackMole(index) {
            const hole = document.getElementById(`hole${index}`);
            if (hole.textContent === 'ğŸ¹') {
                hole.textContent = 'ğŸ’¥';
                hole.classList.remove('bg-green-600');
                hole.classList.add('bg-red-600');
                gameData.score++;
                document.getElementById('whackScore').textContent = gameData.score;
                
                setTimeout(() => {
                    hole.textContent = 'ğŸ•³ï¸';
                    hole.classList.remove('bg-red-600');
                }, 200);
            }
        }

        function endWhackGame() {
            clearInterval(gameData.moleInterval);
            clearInterval(gameData.timerInterval);
            alert(`éŠæˆ²çµæŸï¼ä½ çš„åˆ†æ•¸æ˜¯: ${gameData.score}`);
        }

        // è²ªåƒè›‡éŠæˆ²
        function startSnakeGame() {
            document.getElementById('gameTitle').textContent = 'ğŸ è²ªåƒè›‡';
            gameData.snake = [{x: 10, y: 10}];
            gameData.food = {x: 15, y: 15};
            gameData.direction = {x: 0, y: 0};
            gameData.score = 0;
            gameData.gameRunning = false;
            
            document.getElementById('gameContent').innerHTML = `
                <div class="space-y-4">
                    <div class="text-xl">åˆ†æ•¸: <span id="snakeScore">0</span></div>
                    <canvas id="snakeCanvas" width="400" height="400" class="border-2 border-gray-600 bg-gray-900 mx-auto block"></canvas>
                    <div class="text-center space-y-2">
                        <button onclick="startSnake()" class="btn-primary px-6 py-2 rounded-lg">é–‹å§‹éŠæˆ²</button>
                        <div class="text-sm text-gray-400">ä½¿ç”¨ WASD æˆ–æ–¹å‘éµæ§åˆ¶</div>
                    </div>
                </div>
            `;
            
            drawSnake();
        }

        function startSnake() {
            gameData.gameRunning = true;
            gameData.gameLoop = setInterval(updateSnake, 150);
        }

        function updateSnake() {
            const head = {x: gameData.snake[0].x + gameData.direction.x, y: gameData.snake[0].y + gameData.direction.y};
            
            if (head.x < 0 || head.x >= 20 || head.y < 0 || head.y >= 20 || 
                gameData.snake.some(segment => segment.x === head.x && segment.y === head.y)) {
                clearInterval(gameData.gameLoop);
                gameData.gameRunning = false;
                alert(`éŠæˆ²çµæŸï¼åˆ†æ•¸: ${gameData.score}`);
                return;
            }
            
            gameData.snake.unshift(head);
            
            if (head.x === gameData.food.x && head.y === gameData.food.y) {
                gameData.score++;
                document.getElementById('snakeScore').textContent = gameData.score;
                generateFood();
            } else {
                gameData.snake.pop();
            }
            
            drawSnake();
        }

        function generateFood() {
            gameData.food = {
                x: Math.floor(Math.random() * 20),
                y: Math.floor(Math.random() * 20)
            };
        }

        function drawSnake() {
            const canvas = document.getElementById('snakeCanvas');
            const ctx = canvas.getContext('2d');
            
            ctx.fillStyle = '#111827';
            ctx.fillRect(0, 0, 400, 400);
            
            ctx.fillStyle = '#10b981';
            gameData.snake.forEach(segment => {
                ctx.fillRect(segment.x * 20, segment.y * 20, 18, 18);
            });
            
            ctx.fillStyle = '#ef4444';
            ctx.fillRect(gameData.food.x * 20, gameData.food.y * 20, 18, 18);
        }

        // æ“²éª°å­éŠæˆ²
        function startDiceGame() {
            document.getElementById('gameTitle').textContent = 'ğŸ² æ“²éª°å­éŠæˆ²';
            gameData.score = 0;
            gameData.rounds = 0;
            
            document.getElementById('gameContent').innerHTML = `
                <div class="space-y-6">
                    <div class="text-xl">åˆ†æ•¸: <span id="diceScore">0</span> | å›åˆ: <span id="diceRounds">0</span>/10</div>
                    <p class="text-lg">é æ¸¬ä¸‹ä¸€æ¬¡æ“²éª°å­çš„çµæœï¼</p>
                    <div id="diceResult" class="text-8xl">ğŸ²</div>
                    <div class="grid grid-cols-3 gap-4 max-w-sm mx-auto">
                        <button onclick="makePrediction('low')" class="btn-primary px-4 py-3 rounded-lg">
                            å° (1-2)
                        </button>
                        <button onclick="makePrediction('mid')" class="btn-primary px-4 py-3 rounded-lg">
                            ä¸­ (3-4)
                        </button>
                        <button onclick="makePrediction('high')" class="btn-primary px-4 py-3 rounded-lg">
                            å¤§ (5-6)
                        </button>
                    </div>
                    <div id="diceMessage" class="text-lg"></div>
                </div>
            `;
        }

        function makePrediction(prediction) {
            if (gameData.rounds >= 10) return;
            
            const dice = Math.floor(Math.random() * 6) + 1;
            document.getElementById('diceResult').textContent = dice;
            
            let correct = false;
            if (prediction === 'low' && dice <= 2) correct = true;
            if (prediction === 'mid' && dice >= 3 && dice <= 4) correct = true;
            if (prediction === 'high' && dice >= 5) correct = true;
            
            if (correct) {
                gameData.score += 10;
                document.getElementById('diceMessage').textContent = 'ğŸ‰ é æ¸¬æ­£ç¢ºï¼+10åˆ†';
                document.getElementById('diceMessage').className = 'text-lg text-green-400';
            } else {
                document.getElementById('diceMessage').textContent = 'âŒ é æ¸¬éŒ¯èª¤ï¼';
                document.getElementById('diceMessage').className = 'text-lg text-red-400';
            }
            
            gameData.rounds++;
            document.getElementById('diceScore').textContent = gameData.score;
            document.getElementById('diceRounds').textContent = gameData.rounds;
            
            if (gameData.rounds >= 10) {
                setTimeout(() => {
                    alert(`éŠæˆ²çµæŸï¼æœ€çµ‚åˆ†æ•¸: ${gameData.score}/100`);
                }, 1000);
            }
        }

        // 2048éŠæˆ²
        function start2048Game() {
            document.getElementById('gameTitle').textContent = 'ğŸ”¢ 2048éŠæˆ²';
            gameData.board = Array(4).fill().map(() => Array(4).fill(0));
            gameData.score = 0;
            
            // æ·»åŠ å…©å€‹åˆå§‹æ•¸å­—
            addNewNumber();
            addNewNumber();
            
            document.getElementById('gameContent').innerHTML = `
                <div class="space-y-4">
                    <div class="text-xl">åˆ†æ•¸: <span id="game2048Score">0</span></div>
                    <div id="board2048" class="grid grid-cols-4 gap-2 max-w-sm mx-auto bg-gray-800 p-4 rounded-lg">
                        ${Array(16).fill(0).map((_, i) => 
                            `<div id="tile${i}" class="w-16 h-16 bg-gray-700 rounded flex items-center justify-center text-lg font-bold"></div>`
                        ).join('')}
                    </div>
                    <div class="text-sm text-gray-400">ä½¿ç”¨æ–¹å‘éµæˆ–WASDç§»å‹•</div>
                    <button onclick="reset2048()" class="bg-gray-600 hover:bg-gray-700 px-6 py-2 rounded-lg">
                        é‡æ–°é–‹å§‹
                    </button>
                </div>
            `;
            
            updateBoard2048();
        }

        function addNewNumber() {
            const emptyCells = [];
            for (let i = 0; i < 4; i++) {
                for (let j = 0; j < 4; j++) {
                    if (gameData.board[i][j] === 0) {
                        emptyCells.push({x: i, y: j});
                    }
                }
            }
            
            if (emptyCells.length > 0) {
                const randomCell = emptyCells[Math.floor(Math.random() * emptyCells.length)];
                gameData.board[randomCell.x][randomCell.y] = Math.random() < 0.9 ? 2 : 4;
            }
        }

        function updateBoard2048() {
            for (let i = 0; i < 4; i++) {
                for (let j = 0; j < 4; j++) {
                    const tile = document.getElementById(`tile${i * 4 + j}`);
                    const value = gameData.board[i][j];
                    tile.textContent = value === 0 ? '' : value;
                    
                    // æ ¹æ“šæ•¸å­—è¨­ç½®é¡è‰²
                    if (value === 0) {
                        tile.className = 'w-16 h-16 bg-gray-700 rounded flex items-center justify-center text-lg font-bold';
                    } else if (value === 2) {
                        tile.className = 'w-16 h-16 bg-gray-600 rounded flex items-center justify-center text-lg font-bold';
                    } else if (value === 4) {
                        tile.className = 'w-16 h-16 bg-gray-500 rounded flex items-center justify-center text-lg font-bold';
                    } else if (value === 8) {
                        tile.className = 'w-16 h-16 bg-orange-600 rounded flex items-center justify-center text-lg font-bold';
                    } else if (value >= 16) {
                        tile.className = 'w-16 h-16 bg-red-600 rounded flex items-center justify-center text-lg font-bold';
                    }
                }
            }
            document.getElementById('game2048Score').textContent = gameData.score;
        }

        function move2048(direction) {
            let moved = false;
            const newBoard = gameData.board.map(row => [...row]);
            
            if (direction === 'left' || direction === 'right') {
                for (let i = 0; i < 4; i++) {
                    let row = newBoard[i].filter(val => val !== 0);
                    if (direction === 'right') row.reverse();
                    
                    for (let j = 0; j < row.length - 1; j++) {
                        if (row[j] === row[j + 1]) {
                            row[j] *= 2;
                            gameData.score += row[j];
                            row[j + 1] = 0;
                        }
                    }
                    
                    row = row.filter(val => val !== 0);
                    while (row.length < 4) row.push(0);
                    if (direction === 'right') row.reverse();
                    
                    if (JSON.stringify(row) !== JSON.stringify(gameData.board[i])) moved = true;
                    newBoard[i] = row;
                }
            } else {
                for (let j = 0; j < 4; j++) {
                    let col = [];
                    for (let i = 0; i < 4; i++) {
                        if (newBoard[i][j] !== 0) col.push(newBoard[i][j]);
                    }
                    if (direction === 'down') col.reverse();
                    
                    for (let i = 0; i < col.length - 1; i++) {
                        if (col[i] === col[i + 1]) {
                            col[i] *= 2;
                            gameData.score += col[i];
                            col[i + 1] = 0;
                        }
                    }
                    
                    col = col.filter(val => val !== 0);
                    while (col.length < 4) col.push(0);
                    if (direction === 'down') col.reverse();
                    
                    for (let i = 0; i < 4; i++) {
                        if (newBoard[i][j] !== col[i]) moved = true;
                        newBoard[i][j] = col[i];
                    }
                }
            }
            
            if (moved) {
                gameData.board = newBoard;
                addNewNumber();
                updateBoard2048();
                
                // æª¢æŸ¥æ˜¯å¦é”åˆ°2048
                for (let i = 0; i < 4; i++) {
                    for (let j = 0; j < 4; j++) {
                        if (gameData.board[i][j] === 2048) {
                            alert('ğŸ‰ æ­å–œï¼ä½ é”åˆ°äº†2048ï¼');
                            return;
                        }
                    }
                }
            }
        }

        function reset2048() {
            gameData.board = Array(4).fill().map(() => Array(4).fill(0));
            gameData.score = 0;
            addNewNumber();
            addNewNumber();
            updateBoard2048();
        }

        // é£›é¢éŠæˆ²
        function startDartGame() {
            document.getElementById('gameTitle').textContent = 'ğŸ¯ é£›é¢éŠæˆ²';
            gameData.dartScore = 0;
            gameData.dartsLeft = 10;
            
            document.getElementById('gameContent').innerHTML = `
                <div class="space-y-6">
                    <div class="text-xl">åˆ†æ•¸: <span id="dartTotalScore">0</span> | é£›é¢å‰©é¤˜: <span id="dartsRemaining">10</span></div>
                    <div class="relative mx-auto" style="width: 300px; height: 300px;">
                        <svg width="300" height="300" class="cursor-crosshair" onclick="throwDart(event)">
                            <circle cx="150" cy="150" r="140" fill="#1f2937" stroke="#374151" stroke-width="2"/>
                            <circle cx="150" cy="150" r="100" fill="#374151" stroke="#4b5563" stroke-width="2"/>
                            <circle cx="150" cy="150" r="60" fill="#1f2937" stroke="#374151" stroke-width="2"/>
                            <circle cx="150" cy="150" r="20" fill="#ef4444" stroke="#dc2626" stroke-width="2"/>
                            <circle cx="150" cy="150" r="5" fill="#fbbf24"/>
                            <text x="150" y="30" text-anchor="middle" fill="white" font-size="14">100</text>
                            <text x="150" y="280" text-anchor="middle" fill="white" font-size="14">50</text>
                            <text x="150" y="160" text-anchor="middle" fill="white" font-size="14">200</text>
                        </svg>
                    </div>
                    <div id="dartMessage" class="text-lg"></div>
                </div>
            `;
        }

        function throwDart(event) {
            if (gameData.dartsLeft <= 0) return;
            
            const svg = event.currentTarget;
            const rect = svg.getBoundingClientRect();
            const x = event.clientX - rect.left - 150;
            const y = event.clientY - rect.top - 150;
            const distance = Math.sqrt(x * x + y * y);
            
            let points = 0;
            if (distance <= 5) points = 500; // é¶å¿ƒ
            else if (distance <= 20) points = 200; // ç´…å¿ƒ
            else if (distance <= 60) points = 100; // å…§åœˆ
            else if (distance <= 100) points = 50; // ä¸­åœˆ
            else if (distance <= 140) points = 10; // å¤–åœˆ
            
            gameData.dartScore += points;
            gameData.dartsLeft--;
            
            document.getElementById('dartTotalScore').textContent = gameData.dartScore;
            document.getElementById('dartsRemaining').textContent = gameData.dartsLeft;
            
            if (points > 0) {
                document.getElementById('dartMessage').textContent = `ğŸ¯ å¾—åˆ† ${points} åˆ†ï¼`;
                document.getElementById('dartMessage').className = 'text-lg text-green-400';
            } else {
                document.getElementById('dartMessage').textContent = 'âŒ è„«é¶äº†ï¼';
                document.getElementById('dartMessage').className = 'text-lg text-red-400';
            }
            
            if (gameData.dartsLeft === 0) {
                setTimeout(() => {
                    alert(`éŠæˆ²çµæŸï¼ç¸½åˆ†: ${gameData.dartScore}`);
                }, 500);
            }
        }

        // ç¿»ç‰Œé…å°éŠæˆ²
        function startFlipGame() {
            document.getElementById('gameTitle').textContent = 'ğŸƒ ç¿»ç‰Œé…å°';
            const symbols = ['ğŸ¶', 'ğŸ±', 'ğŸ­', 'ğŸ¹', 'ğŸ°', 'ğŸ¦Š', 'ğŸ»', 'ğŸ¼'];
            gameData.cards = [...symbols, ...symbols].sort(() => Math.random() - 0.5);
            gameData.flipped = [];
            gameData.matched = [];
            gameData.moves = 0;
            
            document.getElementById('gameContent').innerHTML = `
                <div class="space-y-6">
                    <div class="text-xl">æ­¥æ•¸: <span id="flipMoves">0</span></div>
                    <div class="grid grid-cols-4 gap-3 max-w-sm mx-auto">
                        ${gameData.cards.map((symbol, i) => 
                            `<div id="card${i}" class="w-16 h-16 bg-blue-600 rounded-lg flex items-center justify-center text-2xl cursor-pointer hover:bg-blue-500" 
                                  onclick="flipCard(${i})">ğŸƒ</div>`
                        ).join('')}
                    </div>
                    <div id="flipMessage" class="text-lg"></div>
                </div>
            `;
        }

        function flipCard(index) {
            if (gameData.flipped.length >= 2 || gameData.flipped.includes(index) || gameData.matched.includes(index)) return;
            
            const card = document.getElementById(`card${index}`);
            card.textContent = gameData.cards[index];
            card.classList.add('bg-gray-600');
            gameData.flipped.push(index);
            
            if (gameData.flipped.length === 2) {
                gameData.moves++;
                document.getElementById('flipMoves').textContent = gameData.moves;
                
                setTimeout(() => {
                    const [first, second] = gameData.flipped;
                    if (gameData.cards[first] === gameData.cards[second]) {
                        gameData.matched.push(first, second);
                        document.getElementById('flipMessage').textContent = 'âœ… é…å°æˆåŠŸï¼';
                        document.getElementById('flipMessage').className = 'text-lg text-green-400';
                        
                        if (gameData.matched.length === 16) {
                            setTimeout(() => {
                                alert(`ğŸ‰ æ­å–œå®Œæˆï¼ç¸½æ­¥æ•¸: ${gameData.moves}`);
                            }, 500);
                        }
                    } else {
                        document.getElementById(`card${first}`).textContent = 'ğŸƒ';
                        document.getElementById(`card${first}`).classList.remove('bg-gray-600');
                        document.getElementById(`card${second}`).textContent = 'ğŸƒ';
                        document.getElementById(`card${second}`).classList.remove('bg-gray-600');
                        document.getElementById('flipMessage').textContent = 'âŒ ä¸åŒ¹é…ï¼Œå†è©¦è©¦ï¼';
                        document.getElementById('flipMessage').className = 'text-lg text-red-400';
                    }
                    gameData.flipped = [];
                }, 1000);
            }
        }

        // æ‹¼åœ–æ»‘å¡ŠéŠæˆ²
        function startPuzzleGame() {
            document.getElementById('gameTitle').textContent = 'ğŸ§© æ‹¼åœ–æ»‘å¡Š';
            gameData.puzzle = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 0];
            gameData.puzzleMoves = 0;
            
            // æ‰“äº‚æ‹¼åœ–
            for (let i = 0; i < 1000; i++) {
                const emptyIndex = gameData.puzzle.indexOf(0);
                const neighbors = getPuzzleNeighbors(emptyIndex);
                const randomNeighbor = neighbors[Math.floor(Math.random() * neighbors.length)];
                swapPuzzleTiles(emptyIndex, randomNeighbor);
            }
            
            document.getElementById('gameContent').innerHTML = `
                <div class="space-y-6">
                    <div class="text-xl">æ­¥æ•¸: <span id="puzzleMoves">0</span></div>
                    <div class="grid grid-cols-4 gap-1 max-w-sm mx-auto bg-gray-800 p-2 rounded-lg">
                        ${gameData.puzzle.map((num, i) => 
                            `<div id="puzzle${i}" class="w-16 h-16 ${num === 0 ? 'bg-gray-800' : 'bg-blue-600 hover:bg-blue-500'} rounded flex items-center justify-center text-lg font-bold cursor-pointer" 
                                  onclick="movePuzzleTile(${i})">${num === 0 ? '' : num}</div>`
                        ).join('')}
                    </div>
                    <div id="puzzleMessage" class="text-lg"></div>
                </div>
            `;
        }

        function getPuzzleNeighbors(index) {
            const neighbors = [];
            const row = Math.floor(index / 4);
            const col = index % 4;
            
            if (row > 0) neighbors.push(index - 4); // ä¸Š
            if (row < 3) neighbors.push(index + 4); // ä¸‹
            if (col > 0) neighbors.push(index - 1); // å·¦
            if (col < 3) neighbors.push(index + 1); // å³
            
            return neighbors;
        }

        function swapPuzzleTiles(index1, index2) {
            [gameData.puzzle[index1], gameData.puzzle[index2]] = [gameData.puzzle[index2], gameData.puzzle[index1]];
        }

        function movePuzzleTile(index) {
            const emptyIndex = gameData.puzzle.indexOf(0);
            const neighbors = getPuzzleNeighbors(emptyIndex);
            
            if (neighbors.includes(index)) {
                swapPuzzleTiles(index, emptyIndex);
                gameData.puzzleMoves++;
                document.getElementById('puzzleMoves').textContent = gameData.puzzleMoves;
                
                // æ›´æ–°é¡¯ç¤º
                for (let i = 0; i < 16; i++) {
                    const tile = document.getElementById(`puzzle${i}`);
                    const num = gameData.puzzle[i];
                    tile.textContent = num === 0 ? '' : num;
                    tile.className = `w-16 h-16 ${num === 0 ? 'bg-gray-800' : 'bg-blue-600 hover:bg-blue-500'} rounded flex items-center justify-center text-lg font-bold cursor-pointer`;
                }
                
                // æª¢æŸ¥æ˜¯å¦å®Œæˆ
                const solved = gameData.puzzle.slice(0, 15).every((num, i) => num === i + 1) && gameData.puzzle[15] === 0;
                if (solved) {
                    document.getElementById('puzzleMessage').textContent = `ğŸ‰ æ­å–œå®Œæˆï¼æ­¥æ•¸: ${gameData.puzzleMoves}`;
                    document.getElementById('puzzleMessage').className = 'text-lg text-green-400';
                }
            }
        }

        // å¹³è¡¡éŠæˆ²
        function startBalanceGame() {
            document.getElementById('gameTitle').textContent = 'âš–ï¸ å¹³è¡¡éŠæˆ²';
            gameData.ballPosition = 200;
            gameData.ballVelocity = 0;
            gameData.platformPosition = 200;
            gameData.balanceScore = 0;
            gameData.balanceTime = 30;
            
            document.getElementById('gameContent').innerHTML = `
                <div class="space-y-6">
                    <div class="flex justify-between text-xl">
                        <div>åˆ†æ•¸: <span id="balanceScore">0</span></div>
                        <div>æ™‚é–“: <span id="balanceTime">30</span>s</div>
                    </div>
                    <div class="relative mx-auto bg-gray-900 rounded-lg" style="width: 400px; height: 300px;">
                        <canvas id="balanceCanvas" width="400" height="300" class="rounded-lg"></canvas>
                    </div>
                    <div class="text-center space-y-2">
                        <button onclick="startBalanceGame()" class="btn-primary px-6 py-2 rounded-lg">é–‹å§‹éŠæˆ²</button>
                        <div class="text-sm text-gray-400">ä½¿ç”¨å·¦å³æ–¹å‘éµæˆ–A/Dæ§åˆ¶å¹³å°</div>
                    </div>
                </div>
            `;
            
            drawBalance();
        }

        function startBalance() {
            gameData.balanceRunning = true;
            gameData.balanceLoop = setInterval(updateBalance, 50);
            
            gameData.balanceTimer = setInterval(() => {
                gameData.balanceTime--;
                document.getElementById('balanceTime').textContent = gameData.balanceTime;
                if (gameData.balanceTime <= 0) {
                    endBalanceGame();
                }
            }, 1000);
        }

        function updateBalance() {
            // é‡åŠ›å’Œç‰©ç†
            gameData.ballVelocity += 0.5; // é‡åŠ›
            gameData.ballPosition += gameData.ballVelocity;
            
            // å¹³å°ç¢°æ’æª¢æ¸¬
            if (gameData.ballPosition >= 250 && 
                gameData.ballPosition <= gameData.platformPosition + 80 && 
                gameData.ballPosition >= gameData.platformPosition - 20) {
                gameData.ballPosition = 250;
                gameData.ballVelocity = -Math.abs(gameData.ballVelocity) * 0.8;
                gameData.balanceScore++;
                document.getElementById('balanceScore').textContent = gameData.balanceScore;
            }
            
            // é‚Šç•Œæª¢æ¸¬
            if (gameData.ballPosition > 380) {
                endBalanceGame();
                return;
            }
            
            drawBalance();
        }

        function drawBalance() {
            const canvas = document.getElementById('balanceCanvas');
            const ctx = canvas.getContext('2d');
            
            // æ¸…é™¤ç•«å¸ƒ
            ctx.fillStyle = '#111827';
            ctx.fillRect(0, 0, 400, 300);
            
            // ç•«çƒ
            ctx.fillStyle = '#ef4444';
            ctx.beginPath();
            ctx.arc(gameData.ballPosition, 250, 10, 0, 2 * Math.PI);
            ctx.fill();
            
            // ç•«å¹³å°
            ctx.fillStyle = '#3b82f6';
            ctx.fillRect(gameData.platformPosition, 270, 80, 10);
        }

        function endBalanceGame() {
            if (gameData.balanceLoop) clearInterval(gameData.balanceLoop);
            if (gameData.balanceTimer) clearInterval(gameData.balanceTimer);
            gameData.balanceRunning = false;
            alert(`éŠæˆ²çµæŸï¼åˆ†æ•¸: ${gameData.balanceScore}`);
        }

        // éµç›¤æ§åˆ¶
        document.addEventListener('keydown', (e) => {
            if (currentGame === 'snake' && gameData.gameRunning) {
                switch(e.key) {
                    case 'ArrowUp':
                    case 'w':
                    case 'W':
                        if (gameData.direction.y === 0) gameData.direction = {x: 0, y: -1};
                        break;
                    case 'ArrowDown':
                    case 's':
                    case 'S':
                        if (gameData.direction.y === 0) gameData.direction = {x: 0, y: 1};
                        break;
                    case 'ArrowLeft':
                    case 'a':
                    case 'A':
                        if (gameData.direction.x === 0) gameData.direction = {x: -1, y: 0};
                        break;
                    case 'ArrowRight':
                    case 'd':
                    case 'D':
                        if (gameData.direction.x === 0) gameData.direction = {x: 1, y: 0};
                        break;
                }
            }
            
            if (currentGame === '2048') {
                switch(e.key) {
                    case 'ArrowUp':
                    case 'w':
                    case 'W':
                        move2048('up');
                        break;
                    case 'ArrowDown':
                    case 's':
                    case 'S':
                        move2048('down');
                        break;
                    case 'ArrowLeft':
                    case 'a':
                    case 'A':
                        move2048('left');
                        break;
                    case 'ArrowRight':
                    case 'd':
                    case 'D':
                        move2048('right');
                        break;
                }
            }
            
            if (currentGame === 'balance' && gameData.balanceRunning) {
                switch(e.key) {
                    case 'ArrowLeft':
                    case 'a':
                    case 'A':
                        gameData.platformPosition = Math.max(0, gameData.platformPosition - 10);
                        break;
                    case 'ArrowRight':
                    case 'd':
                    case 'D':
                        gameData.platformPosition = Math.min(320, gameData.platformPosition + 10);
                        break;
                }
            }
            
            if (currentGame === 'guess' && e.key === 'Enter') {
                makeGuess();
            }
        });
    </script>


</body></html>
